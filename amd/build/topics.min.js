define ("mod_cardbox/topics",["exports","core/inplace_editable","core/notification","core/ajax","core/str"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;c=f(c);d=f(d);function f(a){return a&&a.__esModule?a:{default:a}}a.init=function init(a){g(a)};function g(a){var b=document.querySelectorAll("#cardbox-topics .cardbox-edittopics-delete-button");b.forEach(function(b){var c=b.closest("#cardbox-topic-in-review"),d=c.getAttribute("data-topicid"),e=c.getAttribute("data-titel");b.addEventListener("click",function(){h(a,d,e)})});var c=document.querySelectorAll("#cardbox-topics .cardbox-edittopics-edit-button");c.forEach(function(b){var c=b.closest("#cardbox-topic-in-review"),d=c.getAttribute("data-topicid");b.addEventListener("click",function(){var b=c.getAttribute("data-titel");i(a,d,b)})});document.getElementById("cardbox-submit-new-topic").addEventListener("click",function(){j(a)})}function h(a,b,f){(0,e.get_strings)([{key:"deletetopic",component:"cardbox"},{key:"deletetopicinfo",component:"cardbox",param:"'"+f+"'"},{key:"yes"},{key:"cancel"}]).then(function(a){c.default.confirm(a[0],a[1],a[2],a[3],function(){d.default.call([{methodname:"mod_cardbox_deletetopic",args:{topicid:b},done:function done(){document.getElementById("cardbox-topic-"+b).parentElement.parentElement.remove()},fail:c.default.exception}])})}).catch(c.default.exception)}function i(a,b,e){document.getElementById("cardbox-topic-"+b).classList.add("displaynone");document.getElementById("cardbox-topic-rename-"+b).classList.remove("displaynone");document.getElementById("cardbox-changedtopic-"+b).value=e;document.getElementById("cardbox-changedtopic-"+b).focus();document.getElementById("cardbox-topic-rename-"+b).addEventListener("keydown",function(){if(13==window.event.keyCode){var a=document.getElementById("cardbox-changedtopic-"+b).value;if(a!=e){d.default.call([{methodname:"mod_cardbox_renametopic",args:{topicid:b,newtopicname:a},done:function done(){document.getElementById("topictitel-"+b).innerHTML=a;document.getElementById("cardbox-topic-"+b).parentElement.setAttribute("data-titel",a)},fail:c.default.exception}])}document.getElementById("cardbox-topic-"+b).classList.remove("displaynone");document.getElementById("cardbox-topic-rename-"+b).classList.add("displaynone")}if(27==window.event.keyCode){document.getElementById("cardbox-topic-"+b).classList.remove("displaynone");document.getElementById("cardbox-topic-rename-"+b).classList.add("displaynone")}});document.getElementById("cardbox-changedtopic-"+b).addEventListener("blur",function(){document.getElementById("cardbox-topic-"+b).classList.remove("displaynone");document.getElementById("cardbox-topic-rename-"+b).classList.add("displaynone")})}function j(a){var b=document.getElementById("create-new-topic").value;if(""!=b){var c=window.location.pathname+"?id="+a+"&action=savenewtopic&newtopic="+b;window.location.href=c}}});
//# sourceMappingURL=topics.min.js.map
